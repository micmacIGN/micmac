language: cpp
matrix:
  include:
  - os: linux
    dist: trusty
    sudo: required
    compiler: gcc
before_install:
- if [ "${TRAVIS_OS_NAME}" = "linux" ]; then sudo apt-get update -qq && sudo apt-get
  install -qq qtbase5-dev; fi
script:
- mkdir build
- cd build
- if [ "${TRAVIS_OS_NAME}" = "linux" ]; then cmake .. -DWITH_QT5=On; fi
- make -j2
- make install
after_success:
- pwd && sh ../script_create_bin_dist.sh ${TRAVIS_OS_NAME} && ls
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: jjfFy8Z+KgbKH1RKzi2b9iyLEtWioyQIphMuVKjL5bB6XC/wjxLUbnV8rM+N57wMySBHQqamQhMM4eMdMOjo/ElDvppiu8a5TBeCT1NOsLh1vA3g1UcPNAwWLN9dtKrt2yImUH/V/Zz7Hu/LDPostU+01+/piThB79mj+PuBH8YShL2r9JrL6qsnL5FUUDZyrShraiEuDIHx111r8R1hAa6VcwwPjxReAIw4vCbWIahOLk+C4krASal1XQ6GAPGM0eOcrbFzEzb8+73RsYGjbu2IJiWzORJmb5/ItX5RTqGdOh/lLVDk4AyvP4mWApsMwzxRhN/cmtXN7FPsa4yp0n4eZOoPE7fgApggaPxxi5j8+jXbZB0lWAftVjhfo8PtZgHD71GNTkNeGD/EIBH7Kf/2dFWsZPh4I8//foCy8phc5SfoUfZA+8Vw63hM9mRC6L+5XxTh06ilJDcU168Db4Aa8tUNW4enD9j4eUbHuW04dHO711T/iOSQgli+mtX2oavgTvLM8GF8A6PjLvpfxkfYhMmZKmHPVTZ/bkXFzU02JMy01+4X/Pf6XbO0Pky924tBW1ROFRetnCAKnhZERHl6aMLz5vN8hAHWSRYfQlNWv+q7u5q5hdi7aZfNuSmkYTTM8Osg/bWseFASgm2AuOUs+NFth9MFFaU9h25vz48=
  file: micmac_${TRAVIS_OS_NAME}.tgz
  on:
    repo: gmaillet/micmac
